╔══════════════════════════════════════════════════════════════════════╗
║                   FLASH BRIDGE - UNIFIED SYSTEM                      ║
║            All Components Integrated & Working Together              ║
╚══════════════════════════════════════════════════════════════════════╝

┌────────────────────────────────────────────────────────────────────┐
│                         LAYER 1: USER INTERFACE                     │
├────────────────────────────────────────────────────────────────────┤
│                                                                     │
│    ┌──────────────────────────────────────────────────────┐       │
│    │        REACT FRONTEND (http://localhost:3000)        │       │
│    │  ┌─────────────────────────────────────────────┐    │       │
│    │  │  • Solana Wallet Adapter (Phantom/Solflare) │    │       │
│    │  │  • WebZjs Integration (Zcash Wallet)        │ ◄──┼───────┤
│    │  │  • Bridge Interface Component                │    │  User │
│    │  │  • Transaction Status Display                │    │       │
│    │  └─────────────────────────────────────────────┘    │       │
│    └───────────────────┬──────────────────────────────────┘       │
└────────────────────────┼───────────────────────────────────────────┘
                         │ HTTP/REST API
                         │ axios calls
┌────────────────────────▼───────────────────────────────────────────┐
│                       LAYER 2: API SERVER                           │
├────────────────────────────────────────────────────────────────────┤
│                                                                     │
│    ┌──────────────────────────────────────────────────────┐       │
│    │   EXPRESS BACKEND (http://localhost:3001)            │       │
│    │                                                       │       │
│    │  ┌────────────────────────────────────────────┐     │       │
│    │  │         ROUTES (API Endpoints)             │     │       │
│    │  ├────────────────────────────────────────────┤     │       │
│    │  │  • POST /api/bridge (mint zenZEC)          │     │       │
│    │  │  • GET  /api/bridge/info                   │     │       │
│    │  │  • GET  /api/zcash/info              [NEW] │     │       │
│    │  │  • POST /api/zcash/verify-transaction [NEW]│     │       │
│    │  │  • GET  /api/zcash/price             [NEW] │     │       │
│    │  │  • GET  /api/zcash/bridge-address    [NEW] │     │       │
│    │  └────────────────────────────────────────────┘     │       │
│    │                                                       │       │
│    │  ┌────────────────────────────────────────────┐     │       │
│    │  │              SERVICES                       │     │       │
│    │  ├────────────────────────────────────────────┤     │       │
│    │  │  solana.js    ✓ Solana integration         │     │       │
│    │  │  zcash.js     ✓ Zcash integration    [NEW] │     │       │
│    │  │  relayer.js   ✓ Event monitoring           │     │       │
│    │  └────────────────────────────────────────────┘     │       │
│    └───────┬─────────────────────┬────────────────────────┘       │
└────────────┼─────────────────────┼───────────────────────────────┘
             │                     │
             │ @solana/web3.js    │ axios + lightwalletd
             │ @anchor             │
┌────────────▼──────────┐   ┌─────▼──────────────────────────────────┐
│   LAYER 3: SOLANA     │   │   LAYER 3: ZCASH                       │
├───────────────────────┤   ├────────────────────────────────────────┤
│                       │   │                                        │
│  ┌─────────────────┐ │   │  ┌──────────────────────────────────┐ │
│  │ ZENZ_BRIDGE     │ │   │  │ LIGHTWALLETD                     │ │
│  │ PROGRAM         │ │   │  │ (zcash-mainnet.chainsafe.dev)    │ │
│  │                 │ │   │  ├──────────────────────────────────┤ │
│  │ Instructions:   │ │   │  │  • Query transactions            │ │
│  │ • initialize    │ │   │  │  • Verify confirmations          │ │
│  │ • mint_zenzec   │ │   │  │  • Monitor new blocks            │ │
│  │ • burn_zenzec   │ │   │  └──────────────────────────────────┘ │
│  │ • burn_and_emit │ │   │                                        │
│  │ • set_paused    │ │   │  ┌──────────────────────────────────┐ │
│  │ • set_max_mint  │ │   │  │ ZCASH EXPLORER                   │ │
│  │                 │ │   │  │ (zcashblockexplorer.com)         │ │
│  │ Events:         │ │   │  ├──────────────────────────────────┤ │
│  │ • BurnSwapEvent │ │   │  │  • Transaction details           │ │
│  └─────────────────┘ │   │  │  • Block height                  │ │
│                       │   │  │  • Confirmation count            │ │
│  ┌─────────────────┐ │   │  └──────────────────────────────────┘ │
│  │ SPL TOKEN       │ │   │                                        │
│  │ (zenZEC Mint)   │ │   │  ┌──────────────────────────────────┐ │
│  └─────────────────┘ │   │  │ ZCASH BLOCKCHAIN                 │ │
│                       │   │  │ (Mainnet / Testnet)              │ │
└───────────────────────┘   │  │  • Shielded transactions         │ │
                            │  │  • Privacy-preserving transfers  │ │
                            │  └──────────────────────────────────┘ │
                            └────────────────────────────────────────┘

┌────────────────────────────────────────────────────────────────────┐
│                        DATA FLOW (INTEGRATED)                       │
├────────────────────────────────────────────────────────────────────┤
│                                                                     │
│  1. User Input (Frontend)                                          │
│     ├─> Enter Solana address                                       │
│     ├─> Enter amount                                               │
│     ├─> Select "Swap to SOL" option                                │
│     └─> [OPTIONAL] Enter Zcash TX hash                             │
│                                                                     │
│  2. API Request                                                    │
│     └─> POST /api/bridge                                           │
│         { solanaAddress, amount, swapToSol, zcashTxHash }          │
│                                                                     │
│  3. Backend Processing                                             │
│     ├─> IF zcashTxHash provided:                                   │
│     │   ├─> Call zcashService.verifyShieldedTransaction()          │
│     │   ├─> Query lightwalletd for confirmation                    │
│     │   ├─> Query explorer for details                             │
│     │   └─> Validate amount matches                                │
│     ├─> Generate bridge transaction ID                             │
│     └─> Prepare Solana minting                                     │
│                                                                     │
│  4. Solana Minting                                                 │
│     ├─> Call solanaService.mintZenZEC()                            │
│     ├─> Execute mint_zenzec instruction                            │
│     ├─> zenZEC tokens minted to user                               │
│     └─> Transaction signature returned                             │
│                                                                     │
│  5. Response to User                                               │
│     └─> Return: { txId, status, zcashVerification, ... }          │
│                                                                     │
│  6. [OPTIONAL] Swap to SOL                                         │
│     ├─> User calls burn_and_emit                                   │
│     ├─> BurnSwapEvent emitted                                      │
│     ├─> Relayer detects event                                      │
│     └─> SOL transferred to user                                    │
│                                                                     │
└────────────────────────────────────────────────────────────────────┘

┌────────────────────────────────────────────────────────────────────┐
│                    EXTERNAL INTEGRATIONS                            │
├────────────────────────────────────────────────────────────────────┤
│                                                                     │
│  ┌──────────────────────────────────────────────────────┐         │
│  │ ChainSafe WebZjs                                     │         │
│  │ https://github.com/ChainSafe/WebZjs                 │         │
│  ├──────────────────────────────────────────────────────┤         │
│  │ • JavaScript Zcash wallet library                    │         │
│  │ • WASM-based for browser use                         │         │
│  │ • Integrated in: frontend/package.json               │         │
│  │ • Usage: Create/manage Zcash transactions            │         │
│  └──────────────────────────────────────────────────────┘         │
│                                                                     │
│  ┌──────────────────────────────────────────────────────┐         │
│  │ Nighthawk Zcash Explorer                             │         │
│  │ https://github.com/nighthawk-apps/zcash-explorer     │         │
│  ├──────────────────────────────────────────────────────┤         │
│  │ • Elixir/Phoenix blockchain explorer                 │         │
│  │ • Provides transaction verification API              │         │
│  │ • Integrated in: backend/src/services/zcash.js       │         │
│  │ • Usage: Query tx details, confirmations             │         │
│  └──────────────────────────────────────────────────────┘         │
│                                                                     │
└────────────────────────────────────────────────────────────────────┘

┌────────────────────────────────────────────────────────────────────┐
│                         SYSTEM FEATURES                             │
├────────────────────────────────────────────────────────────────────┤
│                                                                     │
│  ✓ Multi-chain integration (Solana + Zcash)                        │
│  ✓ Real Zcash transaction verification                             │
│  ✓ Shielded transaction support                                    │
│  ✓ SPL token minting and burning                                   │
│  ✓ Event-driven architecture                                       │
│  ✓ Off-chain relayer for SOL swaps                                 │
│  ✓ RESTful API with comprehensive endpoints                        │
│  ✓ Wallet integration (Solana + Zcash)                             │
│  ✓ Transaction monitoring and verification                          │
│  ✓ Emergency pause mechanism                                       │
│  ✓ Configurable limits and controls                                │
│  ✓ Comprehensive documentation                                     │
│                                                                     │
└────────────────────────────────────────────────────────────────────┘

═══════════════════════════════════════════════════════════════════════
                    SYSTEM STATUS: ✅ FULLY INTEGRATED
═══════════════════════════════════════════════════════════════════════

All components are working together as a cohesive, unified system.
Ready for hackathon demonstration and testnet deployment.

Version: 1.0.0
Date: November 13, 2024
Status: COMPLETE
